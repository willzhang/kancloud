<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>docker安装ssr - willblog</title>
    
    
        <script src="../asset/theme.js"></script>
    
</head>
<body>
<div id="root"></div>
<script type="application/payload+json">
{"book":{"id":"q5wy4m"},"summary":[{"title":"","articles":[{"title":"前言","ref":"README.md","path":"README.html","children":[]},{"title":"VPN教程","ref":"vpn\/README.md","path":"vpn\/README.html","children":[{"title":"trojan","ref":"vpn\/trojan.md","path":"vpn\/trojan.html","children":[]},{"title":"v2ray","ref":"vpn\/v2ray.md","path":"vpn\/v2ray.html","children":[]},{"title":"pptp","ref":"vpn\/pptp.md","path":"vpn\/pptp.html","children":[]},{"title":"l2tp","ref":"vpn\/l2tp.md","path":"vpn\/l2tp.html","children":[]},{"title":"fpr","ref":"fpr.md","path":"fpr.html","children":[]},{"title":"kcptun","ref":"vpn\/kcptun.md","path":"vpn\/kcptun.html","children":[]},{"title":"proxifier","ref":"vpn\/proxifier.md","path":"vpn\/proxifier.html","children":[]},{"title":"goproxy","ref":"vpn\/goproxy.md","path":"vpn\/goproxy.html","children":[]},{"title":"docker安装ssr","ref":"vpn\/docker.md","path":"vpn\/docker.html","children":[]},{"title":"shadowsocks","ref":"vpn\/shadowsocks.md","path":"vpn\/shadowsocks.html","children":[]},{"title":"clash","ref":"vpn\/clash.md","path":"vpn\/clash.html","children":[]},{"title":"openvpn","ref":"vpn\/openvpn.md","path":"vpn\/openvpn.html","children":[]},{"title":"vpn代理","ref":"vpn\/proxy.md","path":"vpn\/proxy.html","children":[]}]},{"title":"常用工具","ref":"tools\/README.md","path":"tools\/README.html","children":[{"title":"natapp","ref":"tools\/natapp.md","path":"tools\/natapp.html","children":[]},{"title":"brook","ref":"tools\/brook.md","path":"tools\/brook.html","children":[]},{"title":"ngrok","ref":"tools\/ngrok.md","path":"tools\/ngrok.html","children":[]},{"title":" go-socks5-proxy","ref":"tools\/ go-socks5-proxy.md","path":"tools\/-go-socks5-proxy.html","children":[]},{"title":"proxychains-ng","ref":"tools\/proxychains-ng.md","path":"tools\/proxychains-ng.html","children":[]}]}]}],"config":{"title":"willblog","root":"\/","plugins":["lunrjs","highlight","upyun"],"pluginsConfig":{"theme-classic":{"navs":[{"title":"test","url":"test.com"},{"title":"tes1","url":"test1.com"}]}}},"file":{"path":"vpn\/docker.html","content":"## docker安装ssr\n\n准备vps服务器\n\n国外vps服务器推荐：\n\n<https:\/\/www.vultr.com\/>\n\n<https:\/\/bandwagonhost.com\/>\n\n阿里云或腾讯云轻量服务器：\n\n<https:\/\/cloud.tencent.com\/product\/lighthouse>\n\n<https:\/\/cn.aliyun.com\/product\/swas>\n\n## Docker安装shadowsocks\n\ndocker镜像官方地址：\n\n<https:\/\/hub.docker.com\/r\/shadowsocks\/shadowsocks-libev>\n\n<https:\/\/github.com\/shadowsocks\/shadowsocks-libev>\n\n集成kcptun加速:\n\n<https:\/\/hub.docker.com\/r\/xtaci\/kcptun>\n\n<https:\/\/github.com\/xtaci\/kcptun>\n\n安装shadowsocks-libev\n\n```\ndocker network create ssr\ndocker run -d --name ssserver \\\n  --restart=always \\\n  --net ssr \\\n  -e PASSWORD=123456 \\\n  -e METHOD=aes-256-gcm \\\n  -p 20000:8388 \\\n  -p 20000:8388\/udp \\\n  shadowsocks\/shadowsocks-libev\n```\n\n创建kcptun配置文件\n\n```\nmkdir \/kcptun\ncat > \/kcptun\/config.json <<EOF\n{\n  \"listen\":\":20001\",\n  \"target\":\"ssserver:8388\",\n  \"key\":\"123456\",\n  \"crypt\":\"aes-192\",\n  \"mode\":\"fast3\",\n  \"autoexpire\":60\n}\nEOF\n```\n\n安装kcptun\n\n```\ndocker run -d --name kcptun \\\n  --restart=always \\\n  --net ssr \\\n  -p 20001:20001 \\\n  -p 20001:20001\/udp \\\n  -v \/kcptun:\/kcptun \\\n  xtaci\/kcptun \\\n  server -c \"\/kcptun\/config.json\"\ndocker-compose文件\n# cat docker-compose.yml\nversion: \"3\"\n\nservices:\n  ssserver:\n    image: shadowsocks\/shadowsocks-libev\n    container_name: ssserver\n    restart: always\n    ports:\n      - \"20000:8388\"\n      - \"20000:8388\/udp\"\n    networks:\n      - ssr\n    environment:\n      - PASSWORD=123456\n      - METHOD=aes-256-gcm\n               \n  kcptun:\n    image: xtaci\/kcptun\n    container_name: kcptun\n    command: server -c \"\/kcptun\/config.json\"  \n    volumes:\n      - \/kcptun\/config.json:\/kcptun\/config.json\n    ports:\n      - \"20001:20001\"\n      - \"20001:20001\/udp\"  \n    networks:\n      - ssr\n    depends_on:\n      - ssserver\n\nnetworks:\n  ssr:\n```\n\ndocker-compsoe运行容器\n\n```\ndocker-compose up -d\n```\n\n## 客户端配置\n\n下载shadowsocks windows客户端\n\n<https:\/\/github.com\/shadowsocks\/shadowsocks-windows\/releases>\n\n不使用kcptun加速的配置方式：\n\n![](..\/images\/screenshot\\_1625806010709.png)\n\n使用kcptun的配置方式：\n\n下载kcptun客户端：\n\n<https:\/\/github.com\/xtaci\/kcptun\/releases>\n\n选择kcptun-windows-amd64-20200701.tar.gz下载解压后将client_windows_amd64.exe复制到shadowsocks根目录下：\n\n![](..\/images\/screenshot\\_1625806036148.png)\n\n配置shadowsocks客户端\n\n插件程序填写：\n\n```\nclient_windows_amd64.exe\n```\n\n勾选需要命令行参数，插件参数填写：\n\n```\n-l %SS_LOCAL_HOST%:%SS_LOCAL_PORT% -r %SS_REMOTE_HOST%:%SS_REMOTE_PORT% --key 123456 --crypt aes-192 --mode fast3 --autoexpire 60\n```\n\n配置示例\n\n![](..\/images\/screenshot\\_1625806066805.png)\n\n## mritd方式\n\n这里使用dockerhub上的镜像，建议访问该网站参考更多内容：\n\n镜像地址：<https:\/\/hub.docker.com\/r\/mritd\/shadowsocks>\n\n拉取镜像并运行：\n\n```\ndocker run -dt \\\n  --name ssserver \\\n  -p 6443:6443 \\\n  -p 6500:6500\/udp \\\n  mritd\/shadowsocks \\\n  -m \"ss-server\" \\\n  -s \"-s 0.0.0.0 -p 6443 -m chacha20-ietf-poly1305 -k 123456\" \\\n  -x -e \"kcpserver\" \\\n  -k \"-t 127.0.0.1:6443 -l :6500 -mode fast2\"\n```\n\nssr安装脚本\n\n```\n#!\/bin\/bash\n#this is a shadowsocks shell\nhostnamectl set-hostname ss_server\nyum install -y epel-release git python-setuptools && easy_install pip\npip install git+https:\/\/github.com\/shadowsocks\/shadowsocks.git@master\ncat > \/etc\/shadowsocks.json  << EOF\n{\n    \"server\": \"0.0.0.0\",\n    \"port_password\": {\n        \"8728\": \"123456\",\n        \"8729\": \"123456\",\n        \"8730\": \"123456\",\n        \"8731\": \"123456\"\n    },\n    \"timeout\": 300,\n    \"method\": \"aes-256-ctr\"\n}\nEOF\nsystemctl restart firewalld\nfirewall-cmd --zone=public --add-port=8728-8731\/tcp --permanent\nfirewall-cmd --reload\nssserver -c \/etc\/shadowsocks.json -d start\n```\n\n\\#获取安装信息\n\n```\nget_ip=$(ip a | grep eth0 | grep inet | awk '{print $2}' |sed 's\/\\\/.*\/\/')\nshadowsocks_port_pwd=$(sed -n '4,7p' \/etc\/shadowsocks.json | sed 's\/^[ \\t]*\/\/g')\nshadowsockscipher=$(awk -F \\\" '\/method\/ {print $4}' \/etc\/shadowsocks.json)\necho \" \" > ss_info.txt\necho \"##############################################################\"\necho -e \"Shadowsocks server install completed!\" >> ss_info.txt\necho \" \" >> ss_info.txt\necho -e \"Your server ip： \\n$get_ip\" >> ss_info.txt\necho \" \" >> ss_info.txt\necho -e \"Your Server Port and password：\\n$shadowsocks_port_pwd\" >> ss_info.txt\necho \" \" >> ss_info.txt\necho -e \"Your Encryption Method: \\n$shadowsockscipher\" >> ss_info.txt\ncat ss_info.txt\necho\necho -e 'see this info again run the follow command \\n# cat ss_info.txt'\necho\necho \"##############################################################\"\nssserver -c \/etc\/shadowsocks.json -d status\n```\n\nsnap安装\n\n<https:\/\/github.com\/shadowsocks\/shadowsocks-libev#build-from-source-with-centos>\n\nshadowsocksR客户端\n\n<https:\/\/github.com\/shadowsocksrr\/shadowsocksr-csharp>\n","meta":{"mtime":""}},"options":{}}
</script>

<script src="https://jsdelivr.topthink.com/npm/lodash@4.17/lodash.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react@17/umd/react.production.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react-dom@17/umd/react-dom.production.min.js"></script>

<script src="../asset/index.js"></script>

<script src="../asset/plugins/highlight/index.js"></script>

<script src="../asset/plugins/lunrjs/index.js"></script>

<script src="../asset/plugins/theme-default/index.js"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>
</body>
</html>
