<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>shadowsocks - willblog</title>
    
    
        <script src="../asset/theme.js"></script>
    
</head>
<body>
<div id="root"></div>
<script type="application/payload+json">
{"book":{"id":"q5wy4m"},"summary":[{"title":"","articles":[{"title":"前言","ref":"README.md","path":"README.html","children":[]},{"title":"VPN教程","ref":"vpn\/README.md","path":"vpn\/README.html","children":[{"title":"trojan","ref":"vpn\/trojan.md","path":"vpn\/trojan.html","children":[]},{"title":"v2ray","ref":"vpn\/v2ray.md","path":"vpn\/v2ray.html","children":[]},{"title":"pptp","ref":"vpn\/pptp.md","path":"vpn\/pptp.html","children":[]},{"title":"l2tp","ref":"vpn\/l2tp.md","path":"vpn\/l2tp.html","children":[]},{"title":"fpr","ref":"fpr.md","path":"fpr.html","children":[]},{"title":"kcptun","ref":"vpn\/kcptun.md","path":"vpn\/kcptun.html","children":[]},{"title":"proxifier","ref":"vpn\/proxifier.md","path":"vpn\/proxifier.html","children":[]},{"title":"goproxy","ref":"vpn\/goproxy.md","path":"vpn\/goproxy.html","children":[]},{"title":"docker安装ssr","ref":"vpn\/docker.md","path":"vpn\/docker.html","children":[]},{"title":"shadowsocks","ref":"vpn\/shadowsocks.md","path":"vpn\/shadowsocks.html","children":[]},{"title":"clash","ref":"vpn\/clash.md","path":"vpn\/clash.html","children":[]},{"title":"openvpn","ref":"vpn\/openvpn.md","path":"vpn\/openvpn.html","children":[]},{"title":"vpn代理","ref":"vpn\/proxy.md","path":"vpn\/proxy.html","children":[]}]},{"title":"常用工具","ref":"tools\/README.md","path":"tools\/README.html","children":[{"title":"natapp","ref":"tools\/natapp.md","path":"tools\/natapp.html","children":[]},{"title":"brook","ref":"tools\/brook.md","path":"tools\/brook.html","children":[]},{"title":"ngrok","ref":"tools\/ngrok.md","path":"tools\/ngrok.html","children":[]},{"title":" go-socks5-proxy","ref":"tools\/ go-socks5-proxy.md","path":"tools\/-go-socks5-proxy.html","children":[]},{"title":"proxychains-ng","ref":"tools\/proxychains-ng.md","path":"tools\/proxychains-ng.html","children":[]}]},{"title":"博客文章","ref":"blogs\/README.md","path":"blogs\/README.html","children":[{"title":"linux安装mysql","ref":"blogs\/mysql.md","path":"blogs\/mysql.html","children":[]},{"title":"linux安装docker","ref":"blogs\/docker.md","path":"blogs\/docker.html","children":[]},{"title":"linux安装openjdk","ref":"blogs\/openjdk.md","path":"blogs\/openjdk.html","children":[]},{"title":"linux安装kubernetes","ref":"blogs\/kubernetes.md","path":"blogs\/kubernetes.html","children":[]}]}]}],"config":{"theme":"maxime","title":"willblog","root":"\/","plugins":["lunrjs","highlight"],"pluginsConfig":{"theme-classic":{"navs":[{"title":"test","url":"test.com"},{"title":"tes1","url":"test1.com"}]}}},"file":{"path":"vpn\/shadowsocks.html","content":"## shadowsocks简介\n\ndockerhub地址\n\n<https:\/\/hub.docker.com\/r\/mritd\/shadowsocks>\n\n## python版shadowsocks\n\n安装git、pyhton、pip\n\n```\nyum install git –y git python-setuptools\n```\n\n安装shadowsocks\n\n```\npip install git+https:\/\/github.com\/shadowsocks\/shadowsocks.git@master\n```\n\n如果想启用ss的chacha20高级加密，需要安装libsodium\n\nlibsodium是给SS提供chacha20、salsa20、chacha20-ietf等高级加密所必须的扩展库，因为chacha20加密，安全性与aes-256-cfb相近，但效率比aes-256-cfb高，所以推荐启用chacha20加密.为了启用chacha20加密，我们先安装libsodium。\n\n```\nyum install -y epel-release\nyum install -y libsodium python34-pip\npip3 install  git+https:\/\/github.com\/shadowsocks\/shadowsocks.git@master\n```\n\n源码编译安装：\n\n\\#因为这库是基于C语言的，所以我们先去安装GCC\n\n```\n yum -y groupinstall \"Development Tools\"\n```\n\n```\n#下载最新稳定版本\nwget https:\/\/download.libsodium.org\/libsodium\/releases\/LATEST.tar.gz\n#解压\ntar xf LATEST.tar.gz && cd libsodium-1.0.11\n#编译\n.\/configure && make -j4 && make install\necho \/usr\/local\/lib > \/etc\/ld.so.conf.d\/usr_local_lib.conf\nldconfig\n```\n\n然后我们就可以修改ss的配置文件来开启效率更高的chacha20加密.\n\n手动配置shadowsocks\n\n```\nsudo ssserver -p 8381 -k 123456 -m aes-256-cfb\n```\n\n后台启动服务\n\n```\nsudo ssserver -p 8381 -k 123456 -m aes-256-cfb --user nobody -d start\n```\n\n停止服务\n\n```\nsudo ssserver -d stop\n```\n\n检查日志文件\n\n```\nsudo less \/var\/log\/shadowsocks.log\n```\n\n查看命令选项\n\n```\nsudo ssserver -h\n```\n\n创建shadowsocks配置文件\n\n单用户配置文件\n\n```\n# vim \/etc\/shadowsocks.json\n{\n    \"server\":\"0.0.0.0\",\n    \"server_port\":8388,\n    \"local_address\": \"127.0.0.1\",\n    \"local_port\":1080,\n    \"password\":\"mypassword\",\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\",\n    \"fast_open\": false\n}\n```\n\n多用户配置文件\n\n```\n# vim \/etc\/shadowsocks.json\n{\n    \"server\": \"0.0.0.0\",\n    \"port_password\": {\n        \"8381\": \"password1\",\n        \"8382\": \"password2\",\n        \"8383\": \"password3\",\n        \"8384\": \"password4\"\n    },\n    \"timeout\": 300,\n    \"method\": \"xchacha20-ietf-poly1305\"\n}\n```\n\n配置文件参数说明\n\n```shell\nName\nExplanation\nserver\nthe address your server listens\nserver_port\nserver port\nlocal_address\nthe address your local listens\nlocal_port\nlocal port\npassword\npassword used for encryption\ntimeout\nin seconds\nmethod\ndefault: \"aes-256-cfb\", see Encryption\nfast_open\nuse TCP_FASTOPEN, true \/ false\nworkers\nnumber of workers, available on Unix\/Linux\n```\n\n前端启动shadowsocks服务\n\n```\nssserver -c \/etc\/shadowsocks.json\n```\n\n后台启动shadowsocks服务\n\n```\nssserver -c \/etc\/shadowsocks.json -d start\n```\n\n关闭shadowsocks服务\n\n```\nssserver -c \/etc\/shadowsocks.json -d stop\n```\n\n查看shadowsocks服务运行状态\n\n```\nssserver -c \/etc\/shadowsocks.json -d status\n```\n\n重启shadowsocks服务\n\n```\nssserver -c \/etc\/shadowsocks.json -d restart\n```\n\n编写自动化安装脚本\n\n```bash\n#！\/bin\/bash\nhostnamectl set-hostname mycentos\nsystemctl stop firewalld.service && systemctl disable firewalld.service\nyum update -y\nyum install -y git epel-release libsodium python34-pip\nyum install python-setuptools && easy_install pip\npip3 install  git+https:\/\/github.com\/shadowsocks\/shadowsocks.git@master\ncat > \/etc\/shadowsocks.json  << EOF\n{\n    \"server\": \"0.0.0.0\",\n    \"port_password\": {\n        \"8728\": \"123456\",\n        \"8729\": \"123456\",\n        \"8730\": \"123456\",\n        \"8731\": \"123456\"\n    },\n    \"timeout\": 300,\n    \"method\": \" xchacha20-ietf-poly1305\"\n}\nEOF\nssserver -c \/etc\/shadowsocks.json -d start\n```\n\ngithub下载脚本地址：\n\n进入对应仓库，点击脚本文件，点击raw获取下载路径\n\n下载并执行脚本\n\n```\n# wget https:\/\/raw.githubusercontent.com\/zhwill\/shadowsocks\/master\/shadowsocks.sh\n# chmod +x shadowsocks.sh\n# .\/shadowsocks.sh\n```\n\nShadowsocks-libevy源码安装\n\nCentOS7源码编译安装Shadowsocks-libev\n\n如果使用CENTOS 7，则需要安装这些预编译以从源代码构建：\n\n```\n# yum install gcc gettext autoconf libtool automake make pcre-devel asciidoc xmlto c-ares-devel libev-devel libsodium-devel mbedtls-devel –y\n# yum install git vim wget epel-release -y\n```\n\n下载源码包\n\n```\n# wget https:\/\/github.com\/shadowsocks\/shadowsocks-libev\/releases\/download\/v3.2.0\/shadowsocks-libev-3.2.0.tar.gz\n```\n\n编译安装\n\n```\n# tar xf shadowsocks-libev-3.2.0.tar.gz\n# cd shadowsocks-libev-3.2.0\n# .\/configure && make && make install\n```\n\n创建配置文件，添加如下内容\n\n```\n[root@CentOS7 ~]# vim \/etc\/shadowsocks-libev\/config.json\n{\n    \"server\":[\"0.0.0.0\"],\n    \"server_port\":8381,\n    \"local_address\":\"127.0.0.1\",\n    \"local_port\":1080,\n    \"password\":\"123456\",\n\"timeout\":600,\n\"fast_open\": false,\n    \"method\":\"chacha20-ietf-poly1305\"\n}\n```\n\n多端口配置文件\n\n```\n{\n    \"server\":[\"0.0.0.0\"],\n    \"local_address\":\"127.0.0.1\",\n    \"local_port\":1080,\n    \"port_password\": {\n        \"8381\": \"123456\",\n        \"8382\": \"123456\"\n     }\n    \"timeout\": 600,\n    \"method\": \"chacha20-ietf-poly1305\"\n}\n```\n\n设置开机自动启动\n\n```\nvi \/etc\/systemd\/system\/shadowsocks.service\n\/etc\/systemd\/system\/shadowsocks.service\n[Unit]\nDescription=Shadowsocks Server\nAfter=network.target\n[Service]\nExecStart=\/usr\/bin\/ss-server -c \/etc\/shadowsocks-libev\/config.json -u\nRestart=on-abort\n[Install]\nWantedBy=multi-user.target\n```\n\n运行\n\n启动 shadowsocks 服务：\n\n```\nsystemctl start shadowsocks\n```\n\n此时，我们还不能通过外网访问服务器，因为防火墙并没有开启相应的端口，编辑防火墙开放的端口服务：\n\n```\nvi \/etc\/firewalld\/zones\/public.xml\n添加如下行：\n<port protocol=\"tcp\" port=\"服务器端口\"\/>\n<port protocol=\"udp\" port=\"服务器端口\"\/>\n```\n\n使新规则生效：\n\n```\nfirewall-cmd --complete-reload\n```\n\n至此，shadowsocks 已经可以使用。可以查看服务状态：\n\n```\nsystemctl status shadowsocks\n```\n\n## 工具测速\n\n3安装测速工具 Speedtest.net是比较广泛的用来测试宽带速度的网站，Speedtest.net的工作原理并不复杂：它在你的浏览器中加载JavaScript代码并自动检测离你最近的Speedtest.net服务器，然后向服务器发送HTTP GET and POST请求来测试上行\/下行网速。\n\n安装pip speedtest是用python写的，没使用过pip的需要先安装pip，\n\n```\nyum install python-pip –y\n```\n\n安装speedtest-cli\n\n```\npip install speedtest-cli \n```\n\n安装完成测试，speedtest-cli命令会查找距离最近的Speedtest.net服务器。并打印出你的下行和上行带宽。\n\n```\n[root@VM_0_12_centos ~]# speedtest-cli \nRetrieving speedtest.net configuration...\nTesting from Tencent cloud computing (119.28.116.254)...\nRetrieving speedtest.net server list...\nSelecting best server based on ping...\nHosted by Beijing Telecom (Beijing) [1.69 km]: 77.193 ms\nTesting download speed................................................................................\nDownload: 99.83 Mbit\/s\nTesting upload speed................................................................................................\nUpload: 74.80 Mbit\/s\n```\n\n使用“–share”参数，会将测试结果上传到Speedtest.net服务器并以图形的方式展示。通过链接地址获得图形报告。\n\nspeedtest-cli --share\n\n其他用法 使用speedtest-cli -h获取使用帮助\n\n## 编写ssr规则\n\n选择编辑GFWList的用户规则：\n\n![](..\/images\/screenshot\\_1625805866713.png)\n\n格式如下\n\n编辑user-rule.txt\n\n```\n! Put user rules line by line in this file.\n! See https:\/\/adblockplus.org\/en\/filter-cheatsheet\n||https:\/\/www.gitbook.com\/^\n```\n\n","meta":{"mtime":""}},"options":{}}
</script>

<script src="https://jsdelivr.topthink.com/npm/lodash@4.17/lodash.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react@17/umd/react.production.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react-dom@17/umd/react-dom.production.min.js"></script>

<script src="../asset/index.js"></script>

<script src="../asset/plugins/highlight/index.js"></script>

<script src="../asset/plugins/lunrjs/index.js"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>
</body>
</html>
