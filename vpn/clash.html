<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>clash - willblog</title>
    
    
        <script src="../asset/theme.js"></script>
    
</head>
<body>
<div id="root"></div>
<script type="application/payload+json">
{"book":{"id":"q5wy4m"},"summary":[{"title":"","articles":[{"title":"前言","ref":"README.md","path":"README.html","children":[]},{"title":"VPN教程","ref":"vpn\/README.md","path":"vpn\/README.html","children":[{"title":"trojan","ref":"vpn\/trojan.md","path":"vpn\/trojan.html","children":[]},{"title":"v2ray","ref":"vpn\/v2ray.md","path":"vpn\/v2ray.html","children":[]},{"title":"pptp","ref":"vpn\/pptp.md","path":"vpn\/pptp.html","children":[]},{"title":"l2tp","ref":"vpn\/l2tp.md","path":"vpn\/l2tp.html","children":[]},{"title":"fpr","ref":"fpr.md","path":"fpr.html","children":[]},{"title":"kcptun","ref":"vpn\/kcptun.md","path":"vpn\/kcptun.html","children":[]},{"title":"proxifier","ref":"vpn\/proxifier.md","path":"vpn\/proxifier.html","children":[]},{"title":"goproxy","ref":"vpn\/goproxy.md","path":"vpn\/goproxy.html","children":[]},{"title":"docker安装ssr","ref":"vpn\/docker.md","path":"vpn\/docker.html","children":[]},{"title":"shadowsocks","ref":"vpn\/shadowsocks.md","path":"vpn\/shadowsocks.html","children":[]},{"title":"clash","ref":"vpn\/clash.md","path":"vpn\/clash.html","children":[]},{"title":"openvpn","ref":"vpn\/openvpn.md","path":"vpn\/openvpn.html","children":[]},{"title":"vpn代理","ref":"vpn\/proxy.md","path":"vpn\/proxy.html","children":[]}]},{"title":"常用工具","ref":"tools\/README.md","path":"tools\/README.html","children":[{"title":"natapp","ref":"tools\/natapp.md","path":"tools\/natapp.html","children":[]},{"title":"brook","ref":"tools\/brook.md","path":"tools\/brook.html","children":[]},{"title":"ngrok","ref":"tools\/ngrok.md","path":"tools\/ngrok.html","children":[]},{"title":" go-socks5-proxy","ref":"tools\/ go-socks5-proxy.md","path":"tools\/-go-socks5-proxy.html","children":[]},{"title":"proxychains-ng","ref":"tools\/proxychains-ng.md","path":"tools\/proxychains-ng.html","children":[]}]}]}],"config":{"title":"willblog","root":"\/","plugins":["lunrjs","highlight","upyun"],"pluginsConfig":{"theme-classic":{"navs":[{"title":"test","url":"test.com"},{"title":"tes1","url":"test1.com"}]}}},"file":{"path":"vpn\/clash.html","content":"## clash简介\n\nClash 是一个基于规则的跨平台代理软件核心程序，是一款用 Go开发的支持 Linux\/MacOS\/Windows等多平台的代理工具，Clash支持 Vmess, Shadowsocks, Snell , SOCKS5 , ShadowsocksR协议，支持规则分流。\nClash分为开源版本与闭源版本（Premium版）：\n闭源版本（Premium版）比开源版本多以下功能：TUN、Script（脚本模式）、Rule Providers。\n详见：<https:\/\/github.com\/Dreamacro\/clash\/wiki\/Premium-Core-Features>\n闭源版本内核（Premium版）下载地址：<https:\/\/github.com\/Dreamacro\/clash\/releases\/tag\/premium>\n\n各个组件说明：\n\n* [Clash](https:\/\/github.com\/Dreamacro\/clash)：一个 Go 语言开发的多平台代理客户端，Github\n\n* [ClashX](https:\/\/github.com\/yichengchen\/clashX\/releases)：Clash 的 Mac 图形客户端，Github\n\n* [ClashForAndroid](https:\/\/github.com\/Kr328\/ClashForAndroid\/releases)：Clash 的 Android 图形客户端，Github\n\n* [Clash for Windows](https:\/\/github.com\/Fndroid\/clash_for_windows_pkg\/releases)：Clash 的 Windows\/macOS 图形客户端\n\n参考文档：\n<https:\/\/docs.cfw.lbyczf.com\/>\n<https:\/\/github.com\/Dreamacro\/clash\/wiki>\n<https:\/\/lancellc.gitbook.io\/clash\/>\n\n## Clash for Windows\n\nClash for Windows 是运行在 Windows 上的一图形化 Clash 分支。通过 Clash API 来配置和控制 Clash 核心程序，便于用户可视化操作和使用。\n\n返回到「General」部分，将「System Proxy」的开关更改为绿色状态即可开始使用。此外，建议将「Start with Windows」也更改为绿色来让 Clash for Windows 在开机时自动启动。\n\n![](..\/images\/screenshot\\_1626065945903.png)\n\n## 配置参数\n\nClash for Windows 界面简介\n\n* `General（常规）`：\n\n  * `Port`；为 HTTP、SOCKS 代理端口，点击终端图案可以打开一个配置了代理的命令行窗口，点击端口数字可以复制该命令；\n  * `Allow LAN`：启用局域网共享代理功能；‘\n  * `Log Level`：日志等级；\n  * `Home Directory`：点击下方路径直达 `C:\\Users\\用户名\\.config\\clash` 文件夹；\n  * `UWP Loopback` ：可以用来使 UWP 应用解除回环代理限制；\n  * `Tap Device` ：安装 cfw-tap 网卡，可用于处理不遵循系统代理的软件；\n  * `General YML`：编辑 `config.yml` 文件，可用于配置部分 **General** 页面内容；\n  * `Mixin`:\n  * `System Proxy`：启用系统代理；\n  * `Start with Windows`：设置开机自启；\n\n* `Proxies（代理）`：选择代理方式（Global - 全局、Rule - 规则、Direct - 直连）及策略组节点选择；\n\n* `Profiles（配置管理）`：\n\n  * 用来下载远端配置文件和创建本地副本，且可在多个配置文件间切换；\n  * 对配置进行节点、策略组和规则的管理（添加节点、策略组和规则在各自编辑界面选择 `Add`, 调整策略组顺序、节点顺序及策略组节点使用拖拽的方式）；\n\n* `Logs（日志）`：显示当前请求命中规则类型和策略；\n\n* `Connections (连接)`: 显示当前的 TCP 连接，可对某个具体连接执行关闭操作；\n\n* `Feedback（反馈）`：显示软件、作者相关信息，内含捐赠码，欢迎打赏 [Fndroid](https:\/\/github.com\/Fndroid) 大佬以感谢和支持开发。\n\n## 关于策略组的理解\n\n<https:\/\/github.com\/Fndroid\/jsbox_script\/wiki\/>\n\n## linux使用clash\n\n下载安装clash\n\n```\nwget https:\/\/github.com\/Dreamacro\/clash\/releases\/download\/v1.6.5\/clash-linux-amd64-v1.6.5.gz\ngunzip -c clash-linux-amd64-v1.6.5.gz > \/usr\/local\/bin\/clash\nchmod +x \/usr\/local\/bin\/clash\nclash -v\n```\n\n创建clash配置文件，\n\n```yaml\n[root@master ~]# cat \/root\/.config\/clash\/config.yaml \nmixed-port: 7890\nallow-lan: true\nbind-address: '*'\nmode: rule\nlog-level: info\nexternal-controller: '127.0.0.1:9090'\ndns:\n    enable: true\n    ipv6: false\n    default-nameserver: [223.5.5.5, 119.29.29.29]\n    enhanced-mode: redir-host\n    fake-ip-range: 198.18.0.1\/16\n    use-hosts: true\n    nameserver: ['https:\/\/doh.pub\/dns-query']\n    fallback: ['tls:\/\/1.0.0.1:853', 'https:\/\/cloudflare-dns.com\/dns-query', 'https:\/\/dns.google\/dns-query']\n    fallback-filter: { geoip: true, ipcidr: [240.0.0.0\/4, 0.0.0.0\/32] }\nproxies:\n    - { name: 'SG Netflix', type: ss, server: ap.01.ysdns.cyou, port: 22002, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '新加坡 02', type: ss, server: ap.01.ysdns.cyou, port: 22001, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '香港 01', type: ss, server: ap.01.ysdns.cyou, port: 22007, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '日本 01', type: ss, server: ap.01.ysdns.cyou, port: 22004, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '日本 02', type: ss, server: ap.01.ysdns.cyou, port: 22003, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '凤凰城 01', type: ss, server: ap.01.ysdns.cyou, port: 22010, cipher: chacha20-ietf-poly1305, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: 'TJ 新加坡 01', type: trojan, server: ap.01.ysdns.cyou, port: 26801, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true, skip-cert-verify: true }\nproxy-groups:\n    - { name: YunSails, type: select, proxies: [自动选择, 故障转移, 'SG Netflix', '新加坡 02', '香港 01', '日本 01', '日本 02', '凤凰城 01', 'TJ 新加坡 01'] }\n    - { name: 自动选择, type: url-test, proxies: ['SG Netflix', '新加坡 02', '香港 01', '日本 01', '日本 02', '凤凰城 01', 'TJ 新加坡 01'], url: 'http:\/\/www.gstatic.com\/generate_204', interval: 86400 }\n    - { name: 故障转移, type: fallback, proxies: ['SG Netflix', '新加坡 02', '香港 01', '日本 01', '日本 02', '凤凰城 01', 'TJ 新加坡 01'], url: 'http:\/\/www.gstatic.com\/generate_204', interval: 7200 }\nrules:\n    - 'DOMAIN,safebrowsing.urlsec.qq.com,DIRECT'\n......\n```\n\n建议从clash for windows客户端导出现有config.yaml配置文件\n![](..\/images\/screenshot\\_1630129721260.png)\n\n启动clash进程\n\n```\nnohup clash &\n```\n\n配置代理\n\n```\nexport http_proxy=http:\/\/127.0.0.1:7890\nexport https_proxy=http:\/\/127.0.0.1:7890\nexport ALL_PROXY=socks5:\/\/127.0.0.1:7890\n```\n\n测试访问\n\n```\ncurl www.google.com\n```\n\n## docker方式安装\n\n创建clash配置文件目录\n\n```\nmkdir -p \/root\/.config\/clash\/\n```\n\n创建clash配置文件\n\n```\n# cat \/root\/.config\/clash\/config.yaml\nmixed-port: 7890\nallow-lan: true\nbind-address: '*'\nmode: rule\nlog-level: info\nexternal-controller: '127.0.0.1:9090'\ndns:\n    enable: true\n    ipv6: false\n    default-nameserver: [223.5.5.5, 119.29.29.29]\n    enhanced-mode: redir-host\n    fake-ip-range: 198.18.0.1\/16\n    use-hosts: true\n    nameserver: ['https:\/\/doh.pub\/dns-query']\n    fallback: ['tls:\/\/1.0.0.1:853', 'https:\/\/cloudflare-dns.com\/dns-query', 'https:\/\/dns.google\/dns-query']\n    fallback-filter: { geoip: true, ipcidr: [240.0.0.0\/4, 0.0.0.0\/32] }\nproxies:\n    - { name: 'SG Netflix', type: ss, server: ap.01.ysdns.cyou, port: 22002, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '新加坡 02', type: ss, server: ap.01.ysdns.cyou, port: 22001, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '香港 01', type: ss, server: ap.01.ysdns.cyou, port: 22007, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '日本 01', type: ss, server: ap.01.ysdns.cyou, port: 22004, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '日本 02', type: ss, server: ap.01.ysdns.cyou, port: 22003, cipher: aes-128-gcm, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: '凤凰城 01', type: ss, server: ap.01.ysdns.cyou, port: 22010, cipher: chacha20-ietf-poly1305, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true }\n    - { name: 'TJ 新加坡 01', type: trojan, server: ap.01.ysdns.cyou, port: 26801, password: ac41f43a-452e-49eb-a0ba-3e3c0e6671ed, udp: true, skip-cert-verify: true }\nproxy-groups:\n    - { name: YunSails, type: select, proxies: [自动选择, 故障转移, 'SG Netflix', '新加坡 02', '香港 01', '日本 01', '日本 02', '凤凰城 01', 'TJ 新加坡 01'] }\n    - { name: 自动选择, type: url-test, proxies: ['SG Netflix', '新加坡 02', '香港 01', '日本 01', '日本 02', '凤凰城 01', 'TJ 新加坡 01'], url: 'http:\/\/www.gstatic.com\/generate_204', interval: 86400 }\n    - { name: 故障转移, type: fallback, proxies: ['SG Netflix', '新加坡 02', '香港 01', '日本 01', '日本 02', '凤凰城 01', 'TJ 新加坡 01'], url: 'http:\/\/www.gstatic.com\/generate_204', interval: 7200 }\nrules:\n    - 'DOMAIN,safebrowsing.urlsec.qq.com,DIRECT'\n......\n```\n\n启动clash\n\n```\ndocker run -d --name clash-client \\\n  --restart always \\\n  -p 7890:7890 \\\n  -p 9090:9090 \\\n  -v \/root\/.config\/clash\/:\/root\/.config\/clash\/ \\\n  dreamacro\/clash\n```\n\n## clash-dashboard\n\n下载安装\n\n```\nmkdir -p \/root\/.config\/clash\/\nwget https:\/\/github.com\/Dreamacro\/clash-dashboard\/archive\/gh-pages.zip\nunzip gh-pages.zip -d \/root\/.config\/clash\/\n```\n\n修改clash配置文件\n\n```\nexternal-controller: 0.0.0.0:9090\nsecret: \"123456\"\nexternal-ui: clash-dashboard-gh-pages\n```\n\n重启clash，浏览器访问：<http:\/\/192.168.93.51:9090\/ui>\n\ndocker集成clash-dashboard\n\n```\ndocker run -d --name clash-client \\\n  --restart always \\\n  -p 7890:7890 \\\n  -p 9090:9090 \\\n  -v \/root\/.config\/clash:\/root\/.config\/clash \\\n  dreamacro\/clash\n```\n\n","meta":{"mtime":""}},"options":{}}
</script>

<script src="https://jsdelivr.topthink.com/npm/lodash@4.17/lodash.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react@17/umd/react.production.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react-dom@17/umd/react-dom.production.min.js"></script>

<script src="../asset/index.js"></script>

<script src="../asset/plugins/highlight/index.js"></script>

<script src="../asset/plugins/lunrjs/index.js"></script>

<script src="../asset/plugins/theme-default/index.js"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>
</body>
</html>
