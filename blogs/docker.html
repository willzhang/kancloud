<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>linux安装docker - willblog</title>
    
    
        <script src="../asset/theme.js"></script>
    
</head>
<body>
<div id="root"></div>
<script type="application/payload+json">
{"book":{"id":"q5wy4m"},"summary":[{"title":"","articles":[{"title":"前言","ref":"README.md","path":"README.html","children":[]},{"title":"VPN教程","ref":"vpn\/README.md","path":"vpn\/README.html","children":[{"title":"trojan","ref":"vpn\/trojan.md","path":"vpn\/trojan.html","children":[]},{"title":"v2ray","ref":"vpn\/v2ray.md","path":"vpn\/v2ray.html","children":[]},{"title":"pptp","ref":"vpn\/pptp.md","path":"vpn\/pptp.html","children":[]},{"title":"l2tp","ref":"vpn\/l2tp.md","path":"vpn\/l2tp.html","children":[]},{"title":"fpr","ref":"fpr.md","path":"fpr.html","children":[]},{"title":"kcptun","ref":"vpn\/kcptun.md","path":"vpn\/kcptun.html","children":[]},{"title":"proxifier","ref":"vpn\/proxifier.md","path":"vpn\/proxifier.html","children":[]},{"title":"goproxy","ref":"vpn\/goproxy.md","path":"vpn\/goproxy.html","children":[]},{"title":"docker安装ssr","ref":"vpn\/docker.md","path":"vpn\/docker.html","children":[]},{"title":"shadowsocks","ref":"vpn\/shadowsocks.md","path":"vpn\/shadowsocks.html","children":[]},{"title":"clash","ref":"vpn\/clash.md","path":"vpn\/clash.html","children":[]},{"title":"openvpn","ref":"vpn\/openvpn.md","path":"vpn\/openvpn.html","children":[]},{"title":"vpn代理","ref":"vpn\/proxy.md","path":"vpn\/proxy.html","children":[]}]},{"title":"常用工具","ref":"tools\/README.md","path":"tools\/README.html","children":[{"title":"natapp","ref":"tools\/natapp.md","path":"tools\/natapp.html","children":[]},{"title":"brook","ref":"tools\/brook.md","path":"tools\/brook.html","children":[]},{"title":"ngrok","ref":"tools\/ngrok.md","path":"tools\/ngrok.html","children":[]},{"title":" go-socks5-proxy","ref":"tools\/ go-socks5-proxy.md","path":"tools\/-go-socks5-proxy.html","children":[]},{"title":"proxychains-ng","ref":"tools\/proxychains-ng.md","path":"tools\/proxychains-ng.html","children":[]}]},{"title":"博客文章","ref":"blogs\/README.md","path":"blogs\/README.html","children":[{"title":"linux安装mysql","ref":"blogs\/mysql.md","path":"blogs\/mysql.html","children":[]},{"title":"linux安装docker","ref":"blogs\/docker.md","path":"blogs\/docker.html","children":[]},{"title":"linux安装openjdk","ref":"blogs\/openjdk.md","path":"blogs\/openjdk.html","children":[]},{"title":"linux安装kubernetes","ref":"blogs\/kubernetes.md","path":"blogs\/kubernetes.html","children":[]}]}]}],"config":{"theme":"maxime","title":"willblog","root":"\/","plugins":["lunrjs","highlight"],"pluginsConfig":{"theme-classic":{"navs":[{"title":"test","url":"test.com"},{"title":"tes1","url":"test1.com"}]}}},"file":{"path":"blogs\/docker.html","content":"## 脚本快速安装docker\n官方提供了安装脚本来快速安装最新版本docker-ce:\n```shell\ncurl -fsSL https:\/\/get.docker.com | bash -s docker --mirror Aliyun\nsystemctl enable --now docker\ndocker version\n```\n参考：\n[https:\/\/github.com\/docker\/docker-install](https:\/\/github.com\/docker\/docker-install)\n[https:\/\/docs.docker.com\/engine\/install\/centos\/#install-using-the-convenience-script](https:\/\/docs.docker.com\/engine\/install\/centos\/#install-using-the-convenience-script)\n\n## 官方安装Docker-CE\n\n官方安装参考：[https:\/\/docs.docker.com\/engine\/installation\/](https:\/\/docs.docker.com\/engine\/installation\/)\n\n**安装环境：**\n\n- 操作系统：CentOS7 CentOS8\n- Docker版本：Docker-CE最新版本\n\n如果安装较旧版本docker，执行以下命令直接安装即可：\n```shell\nyum install -y docker\nsystemctl enable --now docker\n```\n\n以下是按照官方文档安装最新版本docker的方法：\n\n**卸载旧版本docker：**\n\n如果存在旧版docker可以执行以下命令卸载，没有则跳过。\n```python\n$ sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-selinux \\\n                  docker-engine-selinux \\\n                  docker-engine\n```\n\n**安装必要的依赖包：**\n\n```shell\nyum install -y yum-utils device-mapper-persistent-data lvm2\n```\n\n**配置Docker yum源：**\n\n这里使用国内阿里云Yum源：\n```shell\nyum-config-manager --add-repo http:\/\/mirrors.aliyun.com\/docker-ce\/linux\/centos\/docker-ce.repo\n```\n也可以配置官方yum源：\n\n```shell\nyum-config-manager --add-repo https:\/\/download.docker.com\/linux\/centos\/docker-ce.repo\n```\n**安装Docker-CE：**\n\n```shell\nyum install -y docker-ce docker-ce-cli containerd.io\n```\n**查看docker版本，确认安装成功**\n\n```java\n$ docker --version\nDocker version 18.09.0, build 4d60db4\n```\n\n**启动Docker服务并设为开机启动**\n\n```shell\n$ systemctl enable --now docker\n\n#确认docker服务运行正常，显示active (running)说明服务正常运行\n$ systemctl status docker\n```\n**运行容器测试**\n\n```shell\n#运行容器\ndocker run -d --name nginx-app -p 80:80 --restart always nginx\n\n#查看容器运行状态\n# docker ps -a\n\n#启动和重启\ndocker start\/stop\/restart nginx\n\n#删除和强制删除\ndocker rm nginx\ndocker rm -f nginx\n\n#拉取和查看镜像\ndocker pull nginx\ndocker images\n\n#删除镜像\ndocker rmi nginx\n```\n浏览器能够成功访问 http:\/\/<本机ip>:80说明运行正常。\n\n**安装Docker-CE指定版本（可选）**\n\n列出可用版本，然后选择并安装：\n\n```python\n[root@host2 ~]# yum list docker-ce --showduplicates | sort -r\n......\ndocker-ce.x86_64            3:18.09.0-3.el7                    docker-ce-stable \ndocker-ce.x86_64            3:18.09.0-3.el7                    @docker-ce-stable\ndocker-ce.x86_64            18.06.1.ce-3.el7                   docker-ce-stable \ndocker-ce.x86_64            18.06.0.ce-3.el7                   docker-ce-stable \ndocker-ce.x86_64            18.03.1.ce-1.el7.centos            docker-ce-stable \ndocker-ce.x86_64            18.03.0.ce-1.el7.centos            docker-ce-stable \ndocker-ce.x86_64            17.12.1.ce-1.el7.centos            docker-ce-stable \n......\n[root@host2 ~]# \n\n#以安装18.06版本为例\n[root@host2 ~]# yum install docker-ce-18.06.1.ce-3.el7  \n```\n\n##  配置国内镜像加速（可选）\n\n鉴于国内网络问题，后续拉取 Docker 镜像比较慢，建议安装 Docker 之后配置国内镜像加速。\n\n阿里云镜像加速\n```shell\ntee \/etc\/docker\/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https:\/\/uyah70su.mirror.aliyuncs.com\"]\n}\nEOF\n```\n\nAzure 中国镜像加速\n```shell\n{\n  \"registry-mirrors\": [\"https:\/\/dockerhub.azk8s.cn\"],\n}\n```\n清华源镜像加速\n```shell\n{\n  \"registry-mirrors\": [\"https:\/\/docker.mirrors.ustc.edu.cn\"]\n}\n```\ndaocloud镜像加速\n```shell\ncurl -sSL https:\/\/get.daocloud.io\/daotools\/set_mirror.sh | sh -s http:\/\/f1361db2.m.daocloud.io\n```\n配置完成后重启docker服务\n```shell\nsystemctl daemon-reload && systemctl restart docker\n```\n\n检查加速配置是否生效\n执行 $ docker info，如果从结果中看到了如下内容，说明配置成功。\n```shell\n$ docker info | grep Mirrors -A1\nRegistry Mirrors:\n https:\/\/uyah70su.mirror.aliyuncs.com\/\n```\n测试镜像拉取速度\n```shell\n$ time docker pull centos\n```\n\n## centos8安装docker-ce\n```shell\n#配置阿里云yum源\ndnf config-manager --add-repo http:\/\/mirrors.aliyun.com\/docker-ce\/linux\/centos\/docker-ce.repo\n\n#安装containerd.io\ndnf install -y https:\/\/download.docker.com\/linux\/centos\/7\/x86_64\/stable\/Packages\/containerd.io-1.2.13-3.1.el7.x86_64.rpm\n\n#安装docker-ce\ndnf install -y docker-ce\n\n#配置docker镜像加速\nmkdir -p \/etc\/docker\ncat > \/etc\/docker\/daemon.json <<EOF\n{\n  \"registry-mirrors\": [\"https:\/\/uyah70su.mirror.aliyuncs.com\"]\n}\nEOF\n\n#启动docker服务\nsystemctl enable --now docker\n```\n\n## 离线安装docker\n[https:\/\/github.com\/willzhang\/shell\/tree\/master\/docker](https:\/\/github.com\/willzhang\/shell\/tree\/master\/docker)\n\n```shell\nsh docker.sh\n```","meta":{"mtime":""}},"options":{}}
</script>

<script src="https://jsdelivr.topthink.com/npm/lodash@4.17/lodash.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react@17/umd/react.production.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react-dom@17/umd/react-dom.production.min.js"></script>

<script src="../asset/index.js"></script>

<script src="../asset/plugins/highlight/index.js"></script>

<script src="../asset/plugins/lunrjs/index.js"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>
</body>
</html>
